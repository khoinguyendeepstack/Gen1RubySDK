<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActiveMerchant::Billing::CyberSourceGateway - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Gateway.html">ActiveMerchant::Billing::Gateway</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-authorize">#authorize</a>
    
    <li ><a href="#method-i-calculate_tax">#calculate_tax</a>
    
    <li ><a href="#method-i-capture">#capture</a>
    
    <li ><a href="#method-i-credit">#credit</a>
    
    <li ><a href="#method-i-purchase">#purchase</a>
    
    <li ><a href="#method-i-refund">#refund</a>
    
    <li ><a href="#method-i-retrieve">#retrieve</a>
    
    <li ><a href="#method-i-scrub">#scrub</a>
    
    <li ><a href="#method-i-store">#store</a>
    
    <li ><a href="#method-i-supports_network_tokenization-3F">#supports_network_tokenization?</a>
    
    <li ><a href="#method-i-supports_scrubbing-3F">#supports_scrubbing?</a>
    
    <li ><a href="#method-i-unstore">#unstore</a>
    
    <li ><a href="#method-i-update">#update</a>
    
    <li ><a href="#method-i-validate_pinless_debit_card">#validate_pinless_debit_card</a>
    
    <li ><a href="#method-i-verify">#verify</a>
    
    <li ><a href="#method-i-verify_credentials">#verify_credentials</a>
    
    <li ><a href="#method-i-void">#void</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActiveMerchant::Billing::CyberSourceGateway">
  <h1 id="class-ActiveMerchant::Billing::CyberSourceGateway" class="class">
    class ActiveMerchant::Billing::CyberSourceGateway
  </h1>

  <section class="description">
    
<p>Initial setup instructions can be found in <a href="http://apps.cybersource.com/library/documentation/dev_guides/SOAP_Toolkits/SOAP_toolkits.pdf">apps.cybersource.com/library/documentation/dev_guides/SOAP_Toolkits/SOAP_toolkits.pdf</a></p>

<p>Important Notes</p>
<ul><li>
<p>For checks you can purchase and store.</p>
</li><li>
<p>AVS and CVV only work against the production server.  You will always get back X for AVS and no response for CVV against the test server.</p>
</li><li>
<p>Nexus is the list of states or provinces where you have a physical presence.  Nexus is used to calculate tax.  Leave blank to tax everyone.</p>
</li><li>
<p>If you want to calculate VAT for overseas customers you must supply a registration number in the options hash as vat_reg_number.</p>
</li><li>
<p>productCode is a value in the line_items hash that is used to tell CyberSource what kind of item you are selling.  It is used when calculating tax/VAT.</p>
</li><li>
<p>All transactions use dollar values.</p>
</li><li>
<p>To process pinless debit cards through the pinless debit card network, your Cybersource merchant account must accept pinless debit card payments.</p>
</li><li>
<p>The order of the XML elements does matter, make sure to follow the order in the documentation exactly.</p>
</li></ul>

<p>Initial setup instructions can be found in <a href="http://apps.cybersource.com/library/documentation/dev_guides/SOAP_Toolkits/SOAP_toolkits.pdf">apps.cybersource.com/library/documentation/dev_guides/SOAP_Toolkits/SOAP_toolkits.pdf</a></p>

<p>Important Notes</p>
<ul><li>
<p>For checks you can purchase and store.</p>
</li><li>
<p>AVS and CVV only work against the production server.  You will always get back X for AVS and no response for CVV against the test server.</p>
</li><li>
<p>Nexus is the list of states or provinces where you have a physical presence.  Nexus is used to calculate tax.  Leave blank to tax everyone.</p>
</li><li>
<p>If you want to calculate VAT for overseas customers you must supply a registration number in the options hash as vat_reg_number.</p>
</li><li>
<p>productCode is a value in the line_items hash that is used to tell CyberSource what kind of item you are selling.  It is used when calculating tax/VAT.</p>
</li><li>
<p>All transactions use dollar values.</p>
</li><li>
<p>To process pinless debit cards through the pinless debit card network, your Cybersource merchant account must accept pinless debit card payments.</p>
</li><li>
<p>The order of the XML elements does matter, make sure to follow the order in the documentation exactly.</p>
</li></ul>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="DEFAULT_COLLECTION_INDICATOR">DEFAULT_COLLECTION_INDICATOR
        
        <dd>
        
      
        <dt id="ECI_BRAND_MAPPING">ECI_BRAND_MAPPING
        
        <dd>
        
      
        <dt id="PRODUCTION_XSD_VERSION">PRODUCTION_XSD_VERSION
        
        <dd>
        
      
        <dt id="TEST_XSD_VERSION">TEST_XSD_VERSION
        
        <dd><p>Schema files can be found here: <a href="https://ics2ws.ic3.com/commerce/1.x/transactionProcessor">ics2ws.ic3.com/commerce/1.x/transactionProcessor</a>/</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>These are the options that can be used when creating a new CyberSource <a href="Gateway.html"><code>Gateway</code></a> object.</p>

<p>:login =&gt;  your username</p>

<p>:password =&gt;  the transaction key you generated in the Business Center</p>

<p>:test =&gt; true   sets the gateway to test mode</p>

<p>:vat_reg_number =&gt; your VAT registration number</p>

<p>:nexus =&gt; “WI CA QC” sets the states/provinces where you have a physical</p>

<pre>presence for tax purposes</pre>

<p>:ignore_avs =&gt; true   don&#39;t want to use AVS so continue processing even</p>

<pre>if AVS would have failed</pre>

<p>:ignore_cvv =&gt; true   don&#39;t want to use CVV so continue processing even</p>

<pre>if CVV would have failed</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="Gateway.html#method-c-new"><code>ActiveMerchant::Billing::Gateway::new</code></a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:login</span>, <span class="ruby-value">:password</span>)
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-authorize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authorize</span><span
            class="method-args">(money, creditcard_or_reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="authorize-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard_or_reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_auth_request</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard_or_reference</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:authorize</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-calculate_tax" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate_tax</span><span
            class="method-args">(creditcard, options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>CyberSource requires that you provide line item information for tax calculations. If you do not have prices for each item or want to simplify the situation then pass in one fake line item that costs the subtotal of the order</p>

<p>The line_item hash goes in the options hash and should look like</p>

<pre>:line_items =&gt; [
  {
    :declared_value =&gt; &#39;1&#39;,
    :quantity =&gt; &#39;2&#39;,
    :code =&gt; &#39;default&#39;,
    :description =&gt; &#39;Giant Walrus&#39;,
    :sku =&gt; &#39;WA323232323232323&#39;
  },
  {
    :declared_value =&gt; &#39;6&#39;,
    :quantity =&gt; &#39;1&#39;,
    :code =&gt; &#39;default&#39;,
    :description =&gt; &#39;Marble Snowcone&#39;,
    :sku =&gt; &#39;FAKE1232132113123&#39;
  }
]</pre>

<p>This functionality is only supported by this particular gateway may be changed at any time</p>
          
          

          
          <div class="method-source-code" id="calculate_tax-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculate_tax</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:line_items</span>)
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_tax_calculation_request</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:calculate_tax</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-capture" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">capture</span><span
            class="method-args">(money, authorization, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="capture-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_capture_request</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:capture</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-credit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">credit</span><span
            class="method-args">(money, creditcard_or_reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds credit to a card or subscription (stand alone credit).</p>
          
          

          
          <div class="method-source-code" id="credit-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard_or_reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_credit_request</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard_or_reference</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:credit</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purchase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purchase</span><span
            class="method-args">(money, payment_method_or_reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href=":pinless_debit_card">options</a> =&gt; true # attempts to process as pinless debit card</p>
          
          

          
          <div class="method-source-code" id="purchase-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">payment_method_or_reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_purchase_request</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">payment_method_or_reference</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:purchase</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-refund" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">refund</span><span
            class="method-args">(money, identification, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="refund-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 152</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_refund_request</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:refund</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-retrieve" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">retrieve</span><span
            class="method-args">(reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Retrieves a customer subscription/profile</p>
          
          

          
          <div class="method-source-code" id="retrieve-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">retrieve</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:order_id</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_retrieve_subscription_request</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:retrieve</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-scrub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scrub</span><span
            class="method-args">(transcript)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="scrub-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">scrub</span>(<span class="ruby-identifier">transcript</span>)
  <span class="ruby-identifier">transcript</span>.
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;wsse:Password [^&gt;]*&gt;)[^&lt;]*(&lt;/wsse:Password&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;accountNumber&gt;)[^&lt;]*(&lt;/accountNumber&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;cvNumber&gt;)[^&lt;]*(&lt;/cvNumber&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;cavv&gt;)[^&lt;]*(&lt;/cavv&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;xid&gt;)[^&lt;]*(&lt;/xid&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;authenticationData&gt;)[^&lt;]*(&lt;/authenticationData&gt;))i</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-store" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">store</span><span
            class="method-args">(payment_method, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Stores a customer subscription/profile with type “on-demand”. To charge the card while creating a profile, pass <a href=":setup_fee">options</a> =&gt; money</p>
          
          

          
          <div class="method-source-code" id="store-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 172</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">store</span>(<span class="ruby-identifier">payment_method</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_create_subscription_request</span>(<span class="ruby-identifier">payment_method</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:store</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_network_tokenization-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_network_tokenization?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_network_tokenization-3F-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_network_tokenization?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_scrubbing-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_scrubbing?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_scrubbing-3F-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_scrubbing?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unstore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unstore</span><span
            class="method-args">(reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Removes a customer subscription/profile</p>
          
          

          
          <div class="method-source-code" id="unstore-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unstore</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:order_id</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_delete_subscription_request</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:unstore</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update</span><span
            class="method-args">(reference, creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates a customer subscription/profile</p>
          
          

          
          <div class="method-source-code" id="update-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:order_id</span>)
  <span class="ruby-identifier">setup_address_hash</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_update_subscription_request</span>(<span class="ruby-identifier">reference</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:update</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-validate_pinless_debit_card" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_pinless_debit_card</span><span
            class="method-args">(creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determines if a card can be used for Pinless Debit Card transactions</p>
          
          

          
          <div class="method-source-code" id="validate_pinless_debit_card-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">validate_pinless_debit_card</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:order_id</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_validate_pinless_debit_request</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:validate_pinless_debit_card</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify</span><span
            class="method-args">(payment, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">verify</span>(<span class="ruby-identifier">payment</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">MultiResponse</span>.<span class="ruby-identifier">run</span>(<span class="ruby-value">:use_first_response</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span> { <span class="ruby-identifier">authorize</span>(<span class="ruby-value">100</span>, <span class="ruby-identifier">payment</span>, <span class="ruby-identifier">options</span>) }
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span>(<span class="ruby-value">:ignore_result</span>) { <span class="ruby-identifier">void</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify_credentials" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify_credentials</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify_credentials-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">verify_credentials</span>
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">void</span>(<span class="ruby-string">&#39;0&#39;</span>)
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;reasonCode&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;102&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-void" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">void</span><span
            class="method-args">(identification, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="void-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/cyber_source.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">void</span>(<span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_void_request</span>(<span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:void</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

