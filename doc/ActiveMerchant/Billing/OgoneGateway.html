<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActiveMerchant::Billing::OgoneGateway - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">Ogone DirectLink Gateway</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Usage">Usage</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">Alias feature</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">3-D Secure feature</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">Ogone DirectLink Gateway</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Usage">Usage</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">Alias feature</a>
    <li><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">3-D Secure feature</a>
  </ul>
</div>


  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Gateway.html">ActiveMerchant::Billing::Gateway</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-authorize">#authorize</a>
    
    <li ><a href="#method-i-capture">#capture</a>
    
    <li ><a href="#method-i-credit">#credit</a>
    
    <li ><a href="#method-i-purchase">#purchase</a>
    
    <li ><a href="#method-i-refund">#refund</a>
    
    <li ><a href="#method-i-scrub">#scrub</a>
    
    <li ><a href="#method-i-store">#store</a>
    
    <li ><a href="#method-i-supports_scrubbing-3F">#supports_scrubbing?</a>
    
    <li ><a href="#method-i-verify">#verify</a>
    
    <li ><a href="#method-i-void">#void</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActiveMerchant::Billing::OgoneGateway">
  <h1 id="class-ActiveMerchant::Billing::OgoneGateway" class="class">
    class ActiveMerchant::Billing::OgoneGateway
  </h1>

  <section class="description">
    
<h1 id="class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">Ogone DirectLink <a href="Gateway.html"><code>Gateway</code></a><span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>DirectLink is the <a href="../../globallypaid_test_app/node_modules/postcss-attribute-case-insensitive/node_modules/postcss-selector-parser/API_md.html">API</a> version of the Ogone Payment Platform. It allows server to server communication between Ogone systems and your e-commerce website.</p>

<p>This implementation follows the specification provided in the DirectLink integration guide version 4.3.0 (25 April 2012), available here: <a href="https://secure.ogone.com/ncol/Ogone_DirectLink_EN.pdf">secure.ogone.com/ncol/Ogone_DirectLink_EN.pdf</a></p>

<p>It also features aliases, which allow to store/unstore credit cards, as specified in the Alias Manager Option guide version 3.2.1 (25 April 2012) available here: <a href="https://secure.ogone.com/ncol/Ogone_Alias_EN.pdf">secure.ogone.com/ncol/Ogone_Alias_EN.pdf</a></p>

<p>It also implements the 3-D Secure feature, as specified in the DirectLink with 3-D Secure guide version 3.0 (25 April 2012) available here: <a href="https://secure.ogone.com/ncol/Ogone_DirectLink-3-D_EN.pdf">secure.ogone.com/ncol/Ogone_DirectLink-3-D_EN.pdf</a></p>

<p>It was last tested on Release 4.92 of Ogone DirectLink + AliasManager + Direct Link 3D (25 April 2012).</p>

<p>For any questions or comments, please contact one of the following:</p>
<ul><li>
<p>Joel Cogen (joel.cogen@belighted.com)</p>
</li><li>
<p>Nicolas Jacobeus (nicolas.jacobeus@belighted.com),</p>
</li><li>
<p>Sébastien Grosjean (public@zencocoon.com),</p>
</li><li>
<p>Rémy Coutable (remy@jilion.com).</p>
</li></ul>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-Usage">Usage<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>gateway = ActiveMerchant::Billing::OgoneGateway.new(
  :login               =&gt; &quot;my_ogone_psp_id&quot;,
  :user                =&gt; &quot;my_ogone_user_id&quot;,
  :password            =&gt; &quot;my_ogone_pswd&quot;,
  :signature           =&gt; &quot;my_ogone_sha_signature&quot;, # Only if you configured your Ogone environment so.
  :signature_encryptor =&gt; &quot;sha512&quot;                  # Can be &quot;none&quot; (default), &quot;sha1&quot;, &quot;sha256&quot; or &quot;sha512&quot;.
                                                    # Must be the same as the one configured in your Ogone account.
)

# set up credit card object as in main ActiveMerchant example
creditcard = ActiveMerchant::Billing::CreditCard.new(
  :type       =&gt; &#39;visa&#39;,
  :number     =&gt; &#39;4242424242424242&#39;,
  :month      =&gt; 8,
  :year       =&gt; 2009,
  :first_name =&gt; &#39;Bob&#39;,
  :last_name  =&gt; &#39;Bobsen&#39;
)

# run request
response = gateway.purchase(1000, creditcard, :order_id =&gt; &quot;1&quot;) # charge 10 EUR

If you don&#39;t provide an :order_id, the gateway will generate a random one for you.

puts response.success?      # Check whether the transaction was successful
puts response.message       # Retrieve the message returned by Ogone
puts response.authorization # Retrieve the unique transaction ID returned by Ogone
puts response.order_id      # Retrieve the order ID</pre>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">Alias feature<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>To use the alias feature, simply add :billing_id in the options hash:

# Associate the alias to that credit card
gateway.purchase(1000, creditcard, :order_id =&gt; &quot;1&quot;, :billing_id =&gt; &quot;myawesomecustomer&quot;)

# You can use the alias instead of the credit card for subsequent orders
gateway.purchase(2000, &quot;myawesomecustomer&quot;, :order_id =&gt; &quot;2&quot;)

# You can also create an alias without making a purchase using store
gateway.store(creditcard, :billing_id =&gt; &quot;myawesomecustomer&quot;)

# When using store, you can also let Ogone generate the alias for you
response = gateway.store(creditcard)
puts response.billing_id # Retrieve the generated alias

# By default, Ogone tries to authorize 0.01 EUR but you can change this
# amount using the :store_amount option when creating the gateway object:
gateway = ActiveMerchant::Billing::OgoneGateway.new(
  :login               =&gt; &quot;my_ogone_psp_id&quot;,
  :user                =&gt; &quot;my_ogone_user_id&quot;,
  :password            =&gt; &quot;my_ogone_pswd&quot;,
  :signature           =&gt; &quot;my_ogone_sha_signature&quot;,
  :signature_encryptor =&gt; &quot;sha512&quot;,
  :store_amount        =&gt; 100 # The store method will try to authorize 1 EUR instead of 0.01 EUR
)
response = gateway.store(creditcard) # authorize 1 EUR and void the authorization right away</pre>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">3-D Secure feature<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>To use the 3-D Secure feature, simply add :d3d =&gt; true in the options hash:
gateway.purchase(2000, &quot;myawesomecustomer&quot;, :order_id =&gt; &quot;2&quot;, :d3d =&gt; true)

Specific 3-D Secure request options are (please refer to the documentation for more infos about these options):
  :win_3ds         =&gt; :main_window (default), :pop_up or :pop_ix.
  :http_accept     =&gt; &quot;*/*&quot; (default), or any other HTTP_ACCEPT header value.
  :http_user_agent =&gt; The cardholder&#39;s User-Agent string
  :accept_url      =&gt; URL of the web page to show the customer when the payment is authorized.
                      (or waiting to be authorized).
  :decline_url     =&gt; URL of the web page to show the customer when the acquirer rejects the authorization
                      more than the maximum permitted number of authorization attempts (10 by default, but can
                      be changed in the &quot;Global transaction parameters&quot; tab, &quot;Payment retry&quot; section of the
                      Technical Information page).
  :exception_url   =&gt; URL of the web page to show the customer when the payment result is uncertain.
  :paramplus       =&gt; Field to submit the miscellaneous parameters and their values that you wish to be
                      returned in the post sale request or final redirection.
  :complus         =&gt; Field to submit a value you wish to be returned in the post sale request or output.
  :language        =&gt; Customer&#39;s language, for example: &quot;en_EN&quot;</pre>

<h1 id="class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">Ogone DirectLink <a href="Gateway.html"><code>Gateway</code></a><span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Ogone+DirectLink+Gateway">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>DirectLink is the <a href="../../globallypaid_test_app/node_modules/postcss-attribute-case-insensitive/node_modules/postcss-selector-parser/API_md.html">API</a> version of the Ogone Payment Platform. It allows server to server communication between Ogone systems and your e-commerce website.</p>

<p>This implementation follows the specification provided in the DirectLink integration guide version 4.3.0 (25 April 2012), available here: <a href="https://secure.ogone.com/ncol/Ogone_DirectLink_EN.pdf">secure.ogone.com/ncol/Ogone_DirectLink_EN.pdf</a></p>

<p>It also features aliases, which allow to store/unstore credit cards, as specified in the Alias Manager Option guide version 3.2.1 (25 April 2012) available here: <a href="https://secure.ogone.com/ncol/Ogone_Alias_EN.pdf">secure.ogone.com/ncol/Ogone_Alias_EN.pdf</a></p>

<p>It also implements the 3-D Secure feature, as specified in the DirectLink with 3-D Secure guide version 3.0 (25 April 2012) available here: <a href="https://secure.ogone.com/ncol/Ogone_DirectLink-3-D_EN.pdf">secure.ogone.com/ncol/Ogone_DirectLink-3-D_EN.pdf</a></p>

<p>It was last tested on Release 4.92 of Ogone DirectLink + AliasManager + Direct Link 3D (25 April 2012).</p>

<p>For any questions or comments, please contact one of the following:</p>
<ul><li>
<p>Joel Cogen (joel.cogen@belighted.com)</p>
</li><li>
<p>Nicolas Jacobeus (nicolas.jacobeus@belighted.com),</p>
</li><li>
<p>Sébastien Grosjean (public@zencocoon.com),</p>
</li><li>
<p>Rémy Coutable (remy@jilion.com).</p>
</li></ul>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-Usage">Usage<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>gateway = ActiveMerchant::Billing::OgoneGateway.new(
  :login               =&gt; &quot;my_ogone_psp_id&quot;,
  :user                =&gt; &quot;my_ogone_user_id&quot;,
  :password            =&gt; &quot;my_ogone_pswd&quot;,
  :signature           =&gt; &quot;my_ogone_sha_signature&quot;, # Only if you configured your Ogone environment so.
  :signature_encryptor =&gt; &quot;sha512&quot;                  # Can be &quot;none&quot; (default), &quot;sha1&quot;, &quot;sha256&quot; or &quot;sha512&quot;.
                                                    # Must be the same as the one configured in your Ogone account.
)

# set up credit card object as in main ActiveMerchant example
creditcard = ActiveMerchant::Billing::CreditCard.new(
  :type       =&gt; &#39;visa&#39;,
  :number     =&gt; &#39;4242424242424242&#39;,
  :month      =&gt; 8,
  :year       =&gt; 2009,
  :first_name =&gt; &#39;Bob&#39;,
  :last_name  =&gt; &#39;Bobsen&#39;
)

# run request
response = gateway.purchase(1000, creditcard, :order_id =&gt; &quot;1&quot;) # charge 10 EUR

If you don&#39;t provide an :order_id, the gateway will generate a random one for you.

puts response.success?      # Check whether the transaction was successful
puts response.message       # Retrieve the message returned by Ogone
puts response.authorization # Retrieve the unique transaction ID returned by Ogone
puts response.order_id      # Retrieve the order ID</pre>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">Alias feature<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-Alias+feature">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>To use the alias feature, simply add :billing_id in the options hash:

# Associate the alias to that credit card
gateway.purchase(1000, creditcard, :order_id =&gt; &quot;1&quot;, :billing_id =&gt; &quot;myawesomecustomer&quot;)

# You can use the alias instead of the credit card for subsequent orders
gateway.purchase(2000, &quot;myawesomecustomer&quot;, :order_id =&gt; &quot;2&quot;)

# You can also create an alias without making a purchase using store
gateway.store(creditcard, :billing_id =&gt; &quot;myawesomecustomer&quot;)

# When using store, you can also let Ogone generate the alias for you
response = gateway.store(creditcard)
puts response.billing_id # Retrieve the generated alias

# By default, Ogone tries to authorize 0.01 EUR but you can change this
# amount using the :store_amount option when creating the gateway object:
gateway = ActiveMerchant::Billing::OgoneGateway.new(
  :login               =&gt; &quot;my_ogone_psp_id&quot;,
  :user                =&gt; &quot;my_ogone_user_id&quot;,
  :password            =&gt; &quot;my_ogone_pswd&quot;,
  :signature           =&gt; &quot;my_ogone_sha_signature&quot;,
  :signature_encryptor =&gt; &quot;sha512&quot;,
  :store_amount        =&gt; 100 # The store method will try to authorize 1 EUR instead of 0.01 EUR
)
response = gateway.store(creditcard) # authorize 1 EUR and void the authorization right away</pre>

<h2 id="class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">3-D Secure feature<span><a href="#class-ActiveMerchant::Billing::OgoneGateway-label-3-D+Secure+feature">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>To use the 3-D Secure feature, simply add :d3d =&gt; true in the options hash:
gateway.purchase(2000, &quot;myawesomecustomer&quot;, :order_id =&gt; &quot;2&quot;, :d3d =&gt; true)

Specific 3-D Secure request options are (please refer to the documentation for more infos about these options):
  :win_3ds         =&gt; :main_window (default), :pop_up or :pop_ix.
  :http_accept     =&gt; &quot;*/*&quot; (default), or any other HTTP_ACCEPT header value.
  :http_user_agent =&gt; The cardholder&#39;s User-Agent string
  :accept_url      =&gt; URL of the web page to show the customer when the payment is authorized.
                      (or waiting to be authorized).
  :decline_url     =&gt; URL of the web page to show the customer when the acquirer rejects the authorization
                      more than the maximum permitted number of authorization attempts (10 by default, but can
                      be changed in the &quot;Global transaction parameters&quot; tab, &quot;Payment retry&quot; section of the
                      Technical Information page).
  :exception_url   =&gt; URL of the web page to show the customer when the payment result is uncertain.
  :paramplus       =&gt; Field to submit the miscellaneous parameters and their values that you wish to be
                      returned in the post sale request or final redirection.
  :complus         =&gt; Field to submit a value you wish to be returned in the post sale request or output.
  :language        =&gt; Customer&#39;s language, for example: &quot;en_EN&quot;</pre>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="AVS_MAPPING">AVS_MAPPING
        
        <dd>
        
      
        <dt id="CVV_MAPPING">CVV_MAPPING
        
        <dd>
        
      
        <dt id="OGONE_NO_SIGNATURE_DEPRECATION_MESSAGE">OGONE_NO_SIGNATURE_DEPRECATION_MESSAGE
        
        <dd>
        
      
        <dt id="OGONE_STORE_OPTION_DEPRECATION_MESSAGE">OGONE_STORE_OPTION_DEPRECATION_MESSAGE
        
        <dd>
        
      
        <dt id="SUCCESS_MESSAGE">SUCCESS_MESSAGE
        
        <dd>
        
      
        <dt id="THREE_D_SECURE_DISPLAY_WAYS">THREE_D_SECURE_DISPLAY_WAYS
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="Gateway.html#method-c-new"><code>ActiveMerchant::Billing::Gateway::new</code></a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:login</span>, <span class="ruby-value">:user</span>, <span class="ruby-value">:password</span>)
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-authorize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authorize</span><span
            class="method-args">(money, payment_source, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Verify and reserve the specified amount on the account, without actually doing the transaction.</p>
          
          

          
          <div class="method-source-code" id="authorize-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">post</span> = {}
  <span class="ruby-identifier">action</span> = <span class="ruby-identifier">payment_source</span>.<span class="ruby-identifier">brand</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;mastercard&#39;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;PAU&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;RES&#39;</span>
  <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_payment_source</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_money</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">post</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-capture" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">capture</span><span
            class="method-args">(money, authorization, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Complete a previously authorized transaction.</p>
          
          

          
          <div class="method-source-code" id="capture-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">post</span>   = {}
  <span class="ruby-identifier">action</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:action</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;SAL&#39;</span>
  <span class="ruby-identifier">add_authorization</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">reference_from</span>(<span class="ruby-identifier">authorization</span>))
  <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_money</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">post</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-credit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">credit</span><span
            class="method-args">(money, identification_or_credit_card, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Credit the specified account by a specific amount.</p>
          
          

          
          <div class="method-source-code" id="credit-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification_or_credit_card</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">reference_transaction?</span>(<span class="ruby-identifier">identification_or_credit_card</span>)
    <span class="ruby-constant">ActiveMerchant</span>.<span class="ruby-identifier">deprecated</span> <span class="ruby-constant">CREDIT_DEPRECATION_MESSAGE</span>
    <span class="ruby-comment"># Referenced credit: refund of a settled transaction</span>
    <span class="ruby-identifier">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification_or_credit_card</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">else</span> <span class="ruby-comment"># must be a credit card or card reference</span>
    <span class="ruby-identifier">perform_non_referenced_credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification_or_credit_card</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purchase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purchase</span><span
            class="method-args">(money, payment_source, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Verify and transfer the specified amount.</p>
          
          

          
          <div class="method-source-code" id="purchase-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">post</span>   = {}
  <span class="ruby-identifier">action</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:action</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;SAL&#39;</span>
  <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_payment_source</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">add_money</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">post</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-refund" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">refund</span><span
            class="method-args">(money, reference, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Refund of a settled transaction</p>
          
          

          
          <div class="method-source-code" id="refund-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">perform_reference_credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">reference</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-scrub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scrub</span><span
            class="method-args">(transcript)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="scrub-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">scrub</span>(<span class="ruby-identifier">transcript</span>)
  <span class="ruby-identifier">transcript</span>.
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((Authorization: Basic )\w+)</span>, <span class="ruby-string">&#39;\1[FILTERED]&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&amp;?cardno=)[^&amp;]*)i</span>, <span class="ruby-string">&#39;\1[FILTERED]&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&amp;?cvc=)[^&amp;]*)i</span>, <span class="ruby-string">&#39;\1[FILTERED]&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&amp;?pswd=)[^&amp;]*)i</span>, <span class="ruby-string">&#39;\1[FILTERED]&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-store" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">store</span><span
            class="method-args">(payment_source, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Store a credit card by creating an Ogone Alias</p>
          
          

          
          <div class="method-source-code" id="store-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">store</span>(<span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:alias_operation</span>] = <span class="ruby-string">&#39;BYPSP&#39;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:billing_id</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:store</span>)
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">authorize</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:store_amount</span>] <span class="ruby-operator">||</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">payment_source</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">void</span>(<span class="ruby-identifier">response</span>.<span class="ruby-identifier">authorization</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">success?</span>
  <span class="ruby-identifier">response</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_scrubbing-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_scrubbing?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_scrubbing-3F-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_scrubbing?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify</span><span
            class="method-args">(credit_card, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">verify</span>(<span class="ruby-identifier">credit_card</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">MultiResponse</span>.<span class="ruby-identifier">run</span>(<span class="ruby-value">:use_first_response</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span> { <span class="ruby-identifier">authorize</span>(<span class="ruby-value">100</span>, <span class="ruby-identifier">credit_card</span>, <span class="ruby-identifier">options</span>) }
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span>(<span class="ruby-value">:ignore_result</span>) { <span class="ruby-identifier">void</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-void" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">void</span><span
            class="method-args">(identification, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Cancels a previously authorized transaction.</p>
          
          

          
          <div class="method-source-code" id="void-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/ogone.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">void</span>(<span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">post</span> = {}
  <span class="ruby-identifier">add_authorization</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">reference_from</span>(<span class="ruby-identifier">identification</span>))
  <span class="ruby-identifier">commit</span>(<span class="ruby-string">&#39;DES&#39;</span>, <span class="ruby-identifier">post</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

