<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActiveMerchant::Billing::OrbitalGateway - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">Authentication Options</a>
    <li><a href="#class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">Authentication Options</a>
  </ul>
</div>


  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Gateway.html">ActiveMerchant::Billing::Gateway</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../Empty.html">ActiveMerchant::Empty</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add_customer_profile">#add_customer_profile</a>
    
    <li ><a href="#method-i-authorize">#authorize</a>
    
    <li ><a href="#method-i-capture">#capture</a>
    
    <li ><a href="#method-i-credit">#credit</a>
    
    <li ><a href="#method-i-delete_customer_profile">#delete_customer_profile</a>
    
    <li ><a href="#method-i-purchase">#purchase</a>
    
    <li ><a href="#method-i-refund">#refund</a>
    
    <li ><a href="#method-i-retrieve_customer_profile">#retrieve_customer_profile</a>
    
    <li ><a href="#method-i-scrub">#scrub</a>
    
    <li ><a href="#method-i-supports_scrubbing-3F">#supports_scrubbing?</a>
    
    <li ><a href="#method-i-update_customer_profile">#update_customer_profile</a>
    
    <li ><a href="#method-i-verify">#verify</a>
    
    <li ><a href="#method-i-void">#void</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActiveMerchant::Billing::OrbitalGateway">
  <h1 id="class-ActiveMerchant::Billing::OrbitalGateway" class="class">
    class ActiveMerchant::Billing::OrbitalGateway
  </h1>

  <section class="description">
    
<p>For more information on Orbital, visit the <a href="http://download.chasepaymentech.com">integration center</a></p>

<h4 id="class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">Authentication Options<span><a href="#class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The Orbital <a href="Gateway.html"><code>Gateway</code></a> supports two methods of authenticating incoming requests: Source IP authentication and <a href="../Connection.html"><code>Connection</code></a> Username/Password authentication</p>

<p>In addition, these IP addresses/Connection Usernames must be affiliated with the Merchant IDs for which the client should be submitting transactions.</p>

<p>This does allow Third Party Hosting service organizations presenting on behalf of other merchants to submit transactions.  However, each time a new customer is added, the merchant or Third-Party hosting organization needs to ensure that the new Merchant IDs or Chain IDs are affiliated with the hosting companies IPs or <a href="../Connection.html"><code>Connection</code></a> Usernames.</p>

<p>If the merchant expects to have more than one merchant account with the Orbital <a href="Gateway.html"><code>Gateway</code></a>, it should have its IP addresses/Connection Usernames affiliated at the Chain level hierarchy within the Orbital <a href="Gateway.html"><code>Gateway</code></a>.  Each time a new merchant ID is added, as long as it is placed within the same Chain, it will simply work.  Otherwise, the additional MIDs will need to be affiliated with the merchant IPs or <a href="../Connection.html"><code>Connection</code></a> Usernames respectively. For example, we generally affiliate all Salem accounts [BIN 000001] with their Company Number [formerly called MA #] number so all MIDs or Divisions under that Company will automatically be affiliated.</p>

<p>For more information on Orbital, visit the <a href="http://download.chasepaymentech.com">integration center</a></p>

<h4 id="class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">Authentication Options<span><a href="#class-ActiveMerchant::Billing::OrbitalGateway-label-Authentication+Options">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The Orbital <a href="Gateway.html"><code>Gateway</code></a> supports two methods of authenticating incoming requests: Source IP authentication and <a href="../Connection.html"><code>Connection</code></a> Username/Password authentication</p>

<p>In addition, these IP addresses/Connection Usernames must be affiliated with the Merchant IDs for which the client should be submitting transactions.</p>

<p>This does allow Third Party Hosting service organizations presenting on behalf of other merchants to submit transactions.  However, each time a new customer is added, the merchant or Third-Party hosting organization needs to ensure that the new Merchant IDs or Chain IDs are affiliated with the hosting companies IPs or <a href="../Connection.html"><code>Connection</code></a> Usernames.</p>

<p>If the merchant expects to have more than one merchant account with the Orbital <a href="Gateway.html"><code>Gateway</code></a>, it should have its IP addresses/Connection Usernames affiliated at the Chain level hierarchy within the Orbital <a href="Gateway.html"><code>Gateway</code></a>.  Each time a new merchant ID is added, as long as it is placed within the same Chain, it will simply work.  Otherwise, the additional MIDs will need to be affiliated with the merchant IPs or <a href="../Connection.html"><code>Connection</code></a> Usernames respectively. For example, we generally affiliate all Salem accounts [BIN 000001] with their Company Number [formerly called MA #] number so all MIDs or Divisions under that Company will automatically be affiliated.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ACTIVE">ACTIVE
        
        <dd><p>Status Profile Status Flag This field is used to set the status of a <a href="../../Customer.html"><code>Customer</code></a> Profile.</p>
        
      
        <dt id="API_VERSION">API_VERSION
        
        <dd>
        
      
        <dt id="APPROVED">APPROVED
        
        <dd>
        
      
        <dt id="AUTH_AND_CAPTURE">AUTH_AND_CAPTURE
        
        <dd><p>AC - Auth and Capture = &#39;AC&#39;</p>
        
      
        <dt id="AUTH_ONLY">AUTH_ONLY
        
        <dd><p>Auth Only No Capture</p>
        
      
        <dt id="AUTO_GENERATE">AUTO_GENERATE
        
        <dd><pre class="ruby"><span class="ruby-constant">CustomerProfileFromOrderInd</span>
</pre>

<p>Method to use to <a href="../../Generate.html"><code>Generate</code></a> the <a href="../../Customer.html"><code>Customer</code></a> Profile Number When <a href="../../Customer.html"><code>Customer</code></a> Profile Action Type = Create, defines what the <a href="../../Customer.html"><code>Customer</code></a> Profile Number will be:</p>
        
      
        <dt id="AVS_SUPPORTED_COUNTRIES">AVS_SUPPORTED_COUNTRIES
        
        <dd>
        
      
        <dt id="CREATE">CREATE
        
        <dd><p><a href="../../Customer.html"><code>Customer</code></a> Profile Actions</p>
        
      
        <dt id="CURRENCY_CODES">CURRENCY_CODES
        
        <dd>
        
      
        <dt id="CURRENCY_EXPONENTS">CURRENCY_EXPONENTS
        
        <dd>
        
      
        <dt id="DEFERRED">DEFERRED
        
        <dd>
        
      
        <dt id="DELETE">DELETE
        
        <dd>
        
      
        <dt id="ECOMMERCE_TRANSACTION">ECOMMERCE_TRANSACTION
        
        <dd><p>INDUSTRY TYPES</p>
        
      
        <dt id="FORCE_AUTH_AND_CAPTURE">FORCE_AUTH_AND_CAPTURE
        
        <dd><p>FR - Force Auth No Capture and no online authorization = &#39;FR&#39; FC - Force Auth and Capture no online authorization = &#39;FC&#39;</p>
        
      
        <dt id="FORCE_AUTH_ONLY">FORCE_AUTH_ONLY
        
        <dd><p>F  - Force Auth No Capture and no online authorization = &#39;F&#39;</p>
        
      
        <dt id="INACTIVE">INACTIVE
        
        <dd>
        
      
        <dt id="INTERACTIVE_VOICE_RESPONSE">INTERACTIVE_VOICE_RESPONSE
        
        <dd>
        
      
        <dt id="MAIL_ORDER_TELEPHONE_ORDER_TRANSACTION">MAIL_ORDER_TELEPHONE_ORDER_TRANSACTION
        
        <dd>
        
      
        <dt id="MANUAL_SUSPEND">MANUAL_SUSPEND
        
        <dd>
        
      
        <dt id="NON_TAXABLE_TRANSACTION">NON_TAXABLE_TRANSACTION
        
        <dd>
        
      
        <dt id="NO_MAPPING_TO_ORDER_DATA">NO_MAPPING_TO_ORDER_DATA
        
        <dd><p>CustomerProfileOrderOverrideInd Defines if any Order Data can be pre-populated from the <a href="../../Customer.html"><code>Customer</code></a> Reference Number (CustomerRefNum)</p>
        
      
        <dt id="POST_HEADERS">POST_HEADERS
        
        <dd>
        
      
        <dt id="RECURRING">RECURRING
        
        <dd>
        
      
        <dt id="RECURRING_PAYMENT_TRANSACTION">RECURRING_PAYMENT_TRANSACTION
        
        <dd>
        
      
        <dt id="REFUND">REFUND
        
        <dd><p>Refund and Capture no online authorization</p>
        
      
        <dt id="RETRIEVE">RETRIEVE
        
        <dd>
        
      
        <dt id="SENSITIVE_FIELDS">SENSITIVE_FIELDS
        
        <dd>
        
      
        <dt id="SUCCESS">SUCCESS
        
        <dd>
        
      
        <dt id="TAX_INCLUDED">TAX_INCLUDED
        
        <dd>
        
      
        <dt id="TAX_NOT_PROVIDED">TAX_NOT_PROVIDED
        
        <dd><p>Tax Inds</p>
        
      
        <dt id="UPDATE">UPDATE
        
        <dd>
        
      
        <dt id="USE_COMMENTS">USE_COMMENTS
        
        <dd>
        
      
        <dt id="USE_CRN_FOR_COMMENTS">USE_CRN_FOR_COMMENTS
        
        <dd>
        
      
        <dt id="USE_CRN_FOR_ORDER_ID">USE_CRN_FOR_ORDER_ID
        
        <dd>
        
      
        <dt id="USE_CRN_FOR_ORDER_ID_AND_COMMENTS">USE_CRN_FOR_ORDER_ID_AND_COMMENTS
        
        <dd>
        
      
        <dt id="USE_CUSTOMER_REF_NUM">USE_CUSTOMER_REF_NUM
        
        <dd>
        
      
        <dt id="USE_ORDER_ID">USE_ORDER_ID
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="Gateway.html#method-c-new"><code>ActiveMerchant::Billing::Gateway::new</code></a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:merchant_id</span>)
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:login</span>, <span class="ruby-value">:password</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:ip_authentication</span>]
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:merchant_id</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:merchant_id</span>].<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_customer_profile" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_customer_profile</span><span
            class="method-args">(creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h4 id="method-i-add_customer_profile-label-Customer+Profiles"><a href="../../Customer.html"><code>Customer</code></a> Profiles<span><a href="#method-i-add_customer_profile-label-Customer+Profiles">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>:customer_ref_num should be set unless you&#39;re happy with Orbital providing one</p>

<p>:customer_profile_order_override_ind can be set to map the CustomerRefNum to OrderID or Comments. Defaults to &#39;NO&#39; - no mapping</p>

<pre>&#39;NO&#39; - No mapping to order data
&#39;OI&#39; - Use &lt;CustomerRefNum&gt; for &lt;OrderID&gt;
&#39;OD&#39; - Use &lt;CustomerRefNum&gt; for &lt;Comments&gt;
&#39;OA&#39; - Use &lt;CustomerRefNum&gt; for &lt;OrderID&gt; and &lt;Comments&gt;</pre>

<p>:order_default_description can be set optionally. 64 char max.</p>

<p>:order_default_amount can be set optionally. integer as cents.</p>

<p>:status defaults to Active</p>

<pre>&#39;A&#39; - Active
&#39;I&#39; - Inactive
&#39;MS&#39;  - Manual Suspend</pre>
          
          

          
          <div class="method-source-code" id="add_customer_profile-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 276</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_customer_profile</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:customer_profile_action</span>] = <span class="ruby-constant">CREATE</span>
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_customer_request_xml</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:add_customer_profile</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-authorize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authorize</span><span
            class="method-args">(money, creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>A – Authorization request</p>
          
          

          
          <div class="method-source-code" id="authorize-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_new_order_xml</span>(<span class="ruby-constant">AUTH_ONLY</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">add_creditcard</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:currency</span>])
    <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:customer_profiles</span>]
      <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">add_managed_billing</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:authorize</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:trace_number</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-capture" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">capture</span><span
            class="method-args">(money, authorization, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>MFC - Mark For Capture</p>
          
          

          
          <div class="method-source-code" id="capture-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">build_mark_for_capture_xml</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>), <span class="ruby-value">:capture</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-credit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">credit</span><span
            class="method-args">(money, authorization, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="credit-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">ActiveMerchant</span>.<span class="ruby-identifier">deprecated</span> <span class="ruby-constant">CREDIT_DEPRECATION_MESSAGE</span>
  <span class="ruby-identifier">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_customer_profile" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_customer_profile</span><span
            class="method-args">(customer_ref_num)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delete_customer_profile-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delete_customer_profile</span>(<span class="ruby-identifier">customer_ref_num</span>)
  <span class="ruby-identifier">options</span> = { <span class="ruby-value">customer_profile_action:</span> <span class="ruby-constant">DELETE</span>, <span class="ruby-value">customer_ref_num:</span> <span class="ruby-identifier">customer_ref_num</span> }
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_customer_request_xml</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:delete_customer_profile</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purchase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purchase</span><span
            class="method-args">(money, creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>AC – Authorization and Capture</p>
          
          

          
          <div class="method-source-code" id="purchase-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_new_order_xml</span>(<span class="ruby-constant">AUTH_AND_CAPTURE</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">add_creditcard</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:currency</span>])
    <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:customer_profiles</span>]
      <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">add_managed_billing</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:purchase</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:trace_number</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-refund" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">refund</span><span
            class="method-args">(money, authorization, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>R – Refund request</p>
          
          

          
          <div class="method-source-code" id="refund-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_new_order_xml</span>(<span class="ruby-constant">REFUND</span>, <span class="ruby-identifier">money</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">authorization:</span> <span class="ruby-identifier">authorization</span>)) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">add_refund</span>(<span class="ruby-identifier">xml</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:currency</span>])
    <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">tag!</span> <span class="ruby-value">:CustomerRefNum</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:customer_ref_num</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:customer_profiles</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:profile_txn</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:refund</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:trace_number</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-retrieve_customer_profile" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">retrieve_customer_profile</span><span
            class="method-args">(customer_ref_num)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="retrieve_customer_profile-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 288</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">retrieve_customer_profile</span>(<span class="ruby-identifier">customer_ref_num</span>)
  <span class="ruby-identifier">options</span> = { <span class="ruby-value">customer_profile_action:</span> <span class="ruby-constant">RETRIEVE</span>, <span class="ruby-value">customer_ref_num:</span> <span class="ruby-identifier">customer_ref_num</span> }
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_customer_request_xml</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:retrieve_customer_profile</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-scrub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scrub</span><span
            class="method-args">(transcript)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="scrub-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">scrub</span>(<span class="ruby-identifier">transcript</span>)
  <span class="ruby-identifier">transcript</span>.
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;OrbitalConnectionUsername&gt;).+(&lt;/OrbitalConnectionUsername&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;OrbitalConnectionPassword&gt;).+(&lt;/OrbitalConnectionPassword&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;AccountNum&gt;).+(&lt;/AccountNum&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-comment"># the response sometimes contains a new line that cuts off the end of the closing tag</span>
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;CCAccountNum&gt;).+(&lt;/CC))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;CardSecVal&gt;).+(&lt;/CardSecVal&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;MerchantID&gt;).+(&lt;/MerchantID&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r((&lt;CustomerMerchantID&gt;).+(&lt;/CustomerMerchantID&gt;))</span>, <span class="ruby-string">&#39;\1[FILTERED]\2&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_scrubbing-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_scrubbing?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_scrubbing-3F-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">supports_scrubbing?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_customer_profile" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_customer_profile</span><span
            class="method-args">(creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="update_customer_profile-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_customer_profile</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:customer_profile_action</span>] = <span class="ruby-constant">UPDATE</span>
  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_customer_request_xml</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:update_customer_profile</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify</span><span
            class="method-args">(creditcard, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">verify</span>(<span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">MultiResponse</span>.<span class="ruby-identifier">run</span>(<span class="ruby-value">:use_first_response</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span> { <span class="ruby-identifier">authorize</span>(<span class="ruby-value">100</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>) }
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">process</span>(<span class="ruby-value">:ignore_result</span>) { <span class="ruby-identifier">void</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">authorization</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-void" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">void</span><span
            class="method-args">(authorization, options = {}, deprecated = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="void-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/orbital.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">void</span>(<span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">deprecated</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
    <span class="ruby-constant">ActiveMerchant</span>.<span class="ruby-identifier">deprecated</span>(<span class="ruby-string">&#39;Calling the void method with an amount parameter is deprecated and will be removed in a future version.&#39;</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">void</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">deprecated</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">amount:</span> <span class="ruby-identifier">authorization</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">order</span> = <span class="ruby-identifier">build_void_request_xml</span>(<span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">order</span>, <span class="ruby-value">:void</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:trace_number</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

