<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActiveMerchant::Billing::PayflowExpressGateway - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">General Parameters</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">Line Items</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">Customization of Payment Page</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">Additional options for old Checkout Experience, being phased out in 2010 and 2011</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">General Parameters</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">Line Items</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">Customization of Payment Page</a>
    <li><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">Additional options for old Checkout Experience, being phased out in 2010 and 2011</a>
  </ul>
</div>


  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Gateway.html">ActiveMerchant::Billing::Gateway</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="PayflowCommonAPI.html">ActiveMerchant::Billing::PayflowCommonAPI</a>
  
  
  
    <li><a class="include" href="PaypalExpressCommon.html">ActiveMerchant::Billing::PaypalExpressCommon</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-authorize">#authorize</a>
    
    <li ><a href="#method-i-credit">#credit</a>
    
    <li ><a href="#method-i-details_for">#details_for</a>
    
    <li ><a href="#method-i-purchase">#purchase</a>
    
    <li ><a href="#method-i-refund">#refund</a>
    
    <li ><a href="#method-i-setup_authorization">#setup_authorization</a>
    
    <li ><a href="#method-i-setup_purchase">#setup_purchase</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActiveMerchant::Billing::PayflowExpressGateway">
  <h1 id="class-ActiveMerchant::Billing::PayflowExpressGateway" class="class">
    class ActiveMerchant::Billing::PayflowExpressGateway
  </h1>

  <section class="description">
    
<h2 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">General Parameters<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The following parameters are supported for <a href="PayflowExpressGateway.html#method-i-setup_authorization"><code>setup_authorization</code></a>, <a href="PayflowExpressGateway.html#method-i-setup_purchase"><code>setup_purchase</code></a>, <a href="PayflowExpressGateway.html#method-i-authorize"><code>authorize</code></a> and <a href="PayflowExpressGateway.html#method-i-purchase"><code>purchase</code></a> transactions. I&#39;ve read in the docs that they recommend you pass the exact same parameters to both setup and authorize/purchase.</p>

<p>This information was gleaned from a mix of:</p>
<ul><li>
<p><a href="https://developer.paypal.com/docs/classic/payflow/integration-guide/">PayFlow documentation</a></p>
</li><li>
<p>previous <a href="../../ActiveMerchant.html"><code>ActiveMerchant</code></a> code</p>
</li><li>
<p>trial &amp; error</p>
</li></ul>

<p>The following parameters are currently supported.</p>
<dl class="rdoc-list label-list"><dt><code>:ip</code>
<dd>
<p>(opt) <a href="../../Customer.html"><code>Customer</code></a> IP Address</p>
</dd><dt><code>:order_id</code>
<dd>
<p>(opt) An order or invoice number. This will be passed through to the Payflow backend at manager.paypal.com, and show up as “Supplier Reference #”</p>
</dd><dt><code>:description</code>
<dd>
<p>(opt) Order description, shown to buyer (after redirected to PayPal). If Order Line Items are used (see below), then the description is suppressed. This will not be passed through to the Payflow backend.</p>
</dd><dt><code>:billing_address</code>
<dd>
<p>(opt) See <a href="Gateway.html"><code>ActiveMerchant::Billing::Gateway</code></a> for details</p>
</dd><dt><code>:shipping_address</code>
<dd>
<p>(opt) See <a href="Gateway.html"><code>ActiveMerchant::Billing::Gateway</code></a> for details</p>
</dd><dt><code>:currency</code>
<dd>
<p>(req) Currency of transaction, will be set to USD by default for PayFlow Express if not specified</p>
</dd><dt><code>:email</code>
<dd>
<p>(opt) Email of buyer; used to pre-fill PayPal login screen</p>
</dd><dt><code>:payer_id</code>
<dd>
<p>(opt) Unique PayPal buyer account identification number, as returned by <a href="PayflowExpressGateway.html#method-i-details_for"><code>details_for</code></a> request</p>
</dd><dt><code>:token</code>
<dd>
<p>(req for <a href="PayflowExpressGateway.html#method-i-authorize"><code>authorize</code></a> &amp; <a href="PayflowExpressGateway.html#method-i-purchase"><code>purchase</code></a>) Token returned by setup transaction</p>
</dd><dt><code>:no_shipping</code>
<dd>
<p>(opt) Boolean for whether or not to display shipping address to buyer</p>
</dd><dt><code>:address_override</code>
<dd>
<p>(opt) Boolean. If true, display shipping address passed by parameters, rather than shipping address on file with PayPal</p>
</dd><dt><code>:allow_note</code>
<dd>
<p>(opt) Boolean for permitting buyer to add note during checkout. Note contents can be retrieved with <a href="PayflowExpressGateway.html#method-i-details_for"><code>details_for</code></a> transaction</p>
</dd><dt><code>:return_url</code>
<dd>
<p>(req) URL to which the buyer’s browser is returned after choosing to pay.</p>
</dd><dt><code>:cancel_return_url</code>
<dd>
<p>(req) URL to which the buyer is returned if the buyer cancels the order.</p>
</dd><dt><code>:notify_url</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:comment</code>
<dd>
<p>(opt) Comment field which will be reported to Payflow backend (at manager.paypal.com) as Comment1</p>
</dd><dt><code>:comment2</code>
<dd>
<p>(opt) Comment field which will be reported to Payflow backend (at manager.paypal.com) as Comment2</p>
</dd><dt><code>:discount</code>
<dd>
<p>(opt) Total discounts in cents</p>
</dd></dl>

<h2 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">Line Items<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Support for order line items is available, but has to be enabled on the PayFlow backend. This is what I was told by Todd Sieber at Technical Support:</p>

<p><em>You will need to call Payflow Support at 1-888-883-9770, choose option #2.  Request that they update your account in “Pandora” under Product Settings &gt;&gt; PayPal Mark and update the Features Bitmap to 1111111111111112.  This is 15 ones and a two.</em></p>

<p>See <a href="https://www.x.com/message/206214#206214">here</a> for the forum discussion (requires login to <a href="https://x.com">x.com</a></p>
<dl class="rdoc-list label-list"><dt><code>:items</code>
<dd>
<p>(opt) Array of Order Line Items hashes. These are shown to the buyer after redirect to PayPal.</p>

<p>The following keys are supported for line items:</p>
<dl class="rdoc-list label-list"><dt><code>:name</code>
<dd>
<p>Name of line item</p>
</dd><dt><code>:description</code>
<dd>
<p>Description of line item</p>
</dd><dt><code>:amount</code>
<dd>
<p>Line Item Amount in Cents (as Integer)</p>
</dd><dt><code>:quantity</code>
<dd>
<p>Line Item Quantity (default to 1 if left blank)</p>
</dd></dl>
</dd></dl>

<h4 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">Customization of Payment Page<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list label-list"><dt><code>:page_style</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:header_image</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:background_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd></dl>

<h4 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">Additional options for old Checkout Experience, being phased out in 2010 and 2011<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list label-list"><dt><code>:header_background_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:header_border_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd></dl>

<h2 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">General Parameters<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-General+Parameters">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The following parameters are supported for <a href="PayflowExpressGateway.html#method-i-setup_authorization"><code>setup_authorization</code></a>, <a href="PayflowExpressGateway.html#method-i-setup_purchase"><code>setup_purchase</code></a>, <a href="PayflowExpressGateway.html#method-i-authorize"><code>authorize</code></a> and <a href="PayflowExpressGateway.html#method-i-purchase"><code>purchase</code></a> transactions. I&#39;ve read in the docs that they recommend you pass the exact same parameters to both setup and authorize/purchase.</p>

<p>This information was gleaned from a mix of:</p>
<ul><li>
<p><a href="https://developer.paypal.com/docs/classic/payflow/integration-guide/">PayFlow documentation</a></p>
</li><li>
<p>previous <a href="../../ActiveMerchant.html"><code>ActiveMerchant</code></a> code</p>
</li><li>
<p>trial &amp; error</p>
</li></ul>

<p>The following parameters are currently supported.</p>
<dl class="rdoc-list label-list"><dt><code>:ip</code>
<dd>
<p>(opt) <a href="../../Customer.html"><code>Customer</code></a> IP Address</p>
</dd><dt><code>:order_id</code>
<dd>
<p>(opt) An order or invoice number. This will be passed through to the Payflow backend at manager.paypal.com, and show up as “Supplier Reference #”</p>
</dd><dt><code>:description</code>
<dd>
<p>(opt) Order description, shown to buyer (after redirected to PayPal). If Order Line Items are used (see below), then the description is suppressed. This will not be passed through to the Payflow backend.</p>
</dd><dt><code>:billing_address</code>
<dd>
<p>(opt) See <a href="Gateway.html"><code>ActiveMerchant::Billing::Gateway</code></a> for details</p>
</dd><dt><code>:shipping_address</code>
<dd>
<p>(opt) See <a href="Gateway.html"><code>ActiveMerchant::Billing::Gateway</code></a> for details</p>
</dd><dt><code>:currency</code>
<dd>
<p>(req) Currency of transaction, will be set to USD by default for PayFlow Express if not specified</p>
</dd><dt><code>:email</code>
<dd>
<p>(opt) Email of buyer; used to pre-fill PayPal login screen</p>
</dd><dt><code>:payer_id</code>
<dd>
<p>(opt) Unique PayPal buyer account identification number, as returned by <a href="PayflowExpressGateway.html#method-i-details_for"><code>details_for</code></a> request</p>
</dd><dt><code>:token</code>
<dd>
<p>(req for <a href="PayflowExpressGateway.html#method-i-authorize"><code>authorize</code></a> &amp; <a href="PayflowExpressGateway.html#method-i-purchase"><code>purchase</code></a>) Token returned by setup transaction</p>
</dd><dt><code>:no_shipping</code>
<dd>
<p>(opt) Boolean for whether or not to display shipping address to buyer</p>
</dd><dt><code>:address_override</code>
<dd>
<p>(opt) Boolean. If true, display shipping address passed by parameters, rather than shipping address on file with PayPal</p>
</dd><dt><code>:allow_note</code>
<dd>
<p>(opt) Boolean for permitting buyer to add note during checkout. Note contents can be retrieved with <a href="PayflowExpressGateway.html#method-i-details_for"><code>details_for</code></a> transaction</p>
</dd><dt><code>:return_url</code>
<dd>
<p>(req) URL to which the buyer’s browser is returned after choosing to pay.</p>
</dd><dt><code>:cancel_return_url</code>
<dd>
<p>(req) URL to which the buyer is returned if the buyer cancels the order.</p>
</dd><dt><code>:notify_url</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:comment</code>
<dd>
<p>(opt) Comment field which will be reported to Payflow backend (at manager.paypal.com) as Comment1</p>
</dd><dt><code>:comment2</code>
<dd>
<p>(opt) Comment field which will be reported to Payflow backend (at manager.paypal.com) as Comment2</p>
</dd><dt><code>:discount</code>
<dd>
<p>(opt) Total discounts in cents</p>
</dd></dl>

<h2 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">Line Items<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Line+Items">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Support for order line items is available, but has to be enabled on the PayFlow backend. This is what I was told by Todd Sieber at Technical Support:</p>

<p><em>You will need to call Payflow Support at 1-888-883-9770, choose option #2.  Request that they update your account in “Pandora” under Product Settings &gt;&gt; PayPal Mark and update the Features Bitmap to 1111111111111112.  This is 15 ones and a two.</em></p>

<p>See <a href="https://www.x.com/message/206214#206214">here</a> for the forum discussion (requires login to <a href="https://x.com">x.com</a></p>
<dl class="rdoc-list label-list"><dt><code>:items</code>
<dd>
<p>(opt) Array of Order Line Items hashes. These are shown to the buyer after redirect to PayPal.</p>

<p>The following keys are supported for line items:</p>
<dl class="rdoc-list label-list"><dt><code>:name</code>
<dd>
<p>Name of line item</p>
</dd><dt><code>:description</code>
<dd>
<p>Description of line item</p>
</dd><dt><code>:amount</code>
<dd>
<p>Line Item Amount in Cents (as Integer)</p>
</dd><dt><code>:quantity</code>
<dd>
<p>Line Item Quantity (default to 1 if left blank)</p>
</dd></dl>
</dd></dl>

<h4 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">Customization of Payment Page<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Customization+of+Payment+Page">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list label-list"><dt><code>:page_style</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:header_image</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:background_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd></dl>

<h4 id="class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">Additional options for old Checkout Experience, being phased out in 2010 and 2011<span><a href="#class-ActiveMerchant::Billing::PayflowExpressGateway-label-Additional+options+for+old+Checkout+Experience-2C+being+phased+out+in+2010+and+2011">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list label-list"><dt><code>:header_background_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd><dt><code>:header_border_color</code>
<dd>
<p>(opt) Your URL for receiving Instant Payment Notification (IPN) about this transaction.</p>
</dd></dl>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-authorize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authorize</span><span
            class="method-args">(money, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="authorize-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:token</span>, <span class="ruby-value">:payer_id</span>)
  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_sale_or_authorization_request</span>(<span class="ruby-string">&#39;Authorization&#39;</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-credit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">credit</span><span
            class="method-args">(money, identification, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="credit-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">ActiveMerchant</span>.<span class="ruby-identifier">deprecated</span> <span class="ruby-constant">CREDIT_DEPRECATION_MESSAGE</span>
  <span class="ruby-identifier">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-details_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">details_for</span><span
            class="method-args">(token)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="details_for-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">details_for</span>(<span class="ruby-identifier">token</span>)
  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_get_express_details_request</span>(<span class="ruby-identifier">token</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-purchase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">purchase</span><span
            class="method-args">(money, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="purchase-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:token</span>, <span class="ruby-value">:payer_id</span>)
  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_sale_or_authorization_request</span>(<span class="ruby-string">&#39;Sale&#39;</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-refund" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">refund</span><span
            class="method-args">(money, identification, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="refund-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">refund</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_reference_request</span>(<span class="ruby-value">:credit</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setup_authorization" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setup_authorization</span><span
            class="method-args">(money, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="setup_authorization-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_authorization</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:return_url</span>, <span class="ruby-value">:cancel_return_url</span>)

  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_setup_express_sale_or_authorization_request</span>(<span class="ruby-string">&#39;Authorization&#39;</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setup_purchase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setup_purchase</span><span
            class="method-args">(money, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="setup_purchase-source">
            <pre><span class="ruby-comment"># File active_merchant/lib/active_merchant/billing/gateways/payflow_express.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-value">:return_url</span>, <span class="ruby-value">:cancel_return_url</span>)

  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_setup_express_sale_or_authorization_request</span>(<span class="ruby-string">&#39;Sale&#39;</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

